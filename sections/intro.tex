% intro.tex

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Transaction and Isolation Level}
  \begin{center}
    A transaction is a \blue{\it group} of operations
    that is executed \red{atomically}.

    \vspace{0.30cm}
		\resizebox{0.50\textwidth}{!}{\input{tikz/isolation-intro-write-skew-tikz}}

    \vspace{0.20cm}
    \uncover<3->{
      The isolation levels specify how they are isolated from each other.
    }
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Serializability (SER)}
  \begin{center}
    All transactions appear to execute in some total order.

    \vspace{0.30cm}
		\resizebox{0.50\textwidth}{!}{\input{tikz/isolation-ser-write-skew-tikz}}

    \vspace{0.20cm}
    \uncover<5->{
      too expensive, especially for distributed transactions
    }
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Snapshot Isolation (SI)}
  \begin{center}
		\resizebox{0.50\textwidth}{!}{\input{tikz/isolation-si-write-skew-tikz}}

    \vspace{0.20cm}
    \uncover<7->{
      \violet{Snapshot Read:} Each transaction reads data from a {\it snapshot}
        of committed data valid as of the (logical) time the transaction started.
    }
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Snapshot Isolation (SI)}
  \begin{center}
    \resizebox{0.48\textwidth}{!}{\input{tikz/isolation-si-lost-update-tikz}}
  \end{center}

  \vspace{-0.50cm}
  \uncover<4->{
  \violet{Snapshot Write:}
    Concurrent transactions cannot write to the same key.
    One of them must be aborted.
  }
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Snapshot Isolation (SI)}
  \begin{center}
    \resizebox{0.60\textwidth}{!}{\input{tikz/isolation-si-causality-violation-tikz}}
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Database systems and Snapshot Isolation}
  \begin{center}
    Many database systems choose to support SI.

    \vspace{0.30cm}
    \fig{width = 0.80\textwidth}{figs/db-si}
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Database Systems and Snapshot Isolation}
  \begin{center}
    Database systems may \red{fail} to provide SI correctly as they claim.

    \vspace{0.30cm}
    \fig{width = 0.85\textwidth}{figs/db-si-violations}
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{The SI Checking Problem}
  \begin{definition}[The SI Checking Problem]
    The SI checking problem is the \purple{decision problem} of \\[5pt]
    determing whether a given \teal{history $\H = (T, \SO)$} satisfies SI?
  \end{definition}

  \fig{width = 0.60\textwidth}{figs/si-checking}

  \pause
  \vspace{-0.50cm}
  \[
    \SO: \text{{\it session order} among the set $T$ of transactions}
  \]
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{The SI Checking Problem}
  \begin{center}
    \blue{\it Black-box checking:} do not rely on database internals

    \vspace{0.20cm}
    \resizebox{0.55\textwidth}{!}{\input{tikz/blackbox-tikz}}
    \vspace{0.20cm}

    \uncover<1->{
      The histories are collected from database logs.
    }
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{The SI Checking Problem}
  \begin{center}
    \input{tikz/checker-tikz}

    \vspace{0.30cm}
    \only<2>{
      \blue{\it Sound:} If the checker says \no,
        then the history does {\it not} satisfy SI.
    }
    \only<3>{
      \blue{\it Complete:} If the checker says \yes,
        then the history {\it satisfies} SI.
    }
    \only<4>{
      \blue{\it Efficient:} The checker should {\it scale} up to large workloads.
    }
    \only<5>{
      \blue{\it Informative:} The checker should provide
        understandable {\it counterexamples} if it says \no.
    }
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Related Work}
  \begin{description}
    \setlength{\itemsep}{15pt}
    \item[dbcop~\ncite{Complexity:OOPSLA2019}] checker for SI \\[2pt]
      not practically efficient; \\[2pt]
      not informative, only ``\textsf{False}'' upon violations
    \pause
    \item[Elle~\ncite{Elle:VLDB2020}] checker for various isolation levels \\[2pt]
      SI checking based on~\ncite{Adya:PhDThesis1999}
      relies on start/commit timestamps \\[2pt]
      SI checking based on~\ncite{AnalysingSI:JACM2018}
      is unsound for efficiency reasons~\footnote{https://github.com/jepsen-io/elle/issues/17; Fixed now.}
    \pause
    \item[Cobra~\ncite{Cobra:OSDI2020}] checker for SER \\[2pt]
      SI checking is {\it harder} than SER checking
  \end{description}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Contribution: the \polysi{} Checker}
  \fig{width = 0.70\textwidth}{figs/checker-polysi}
\end{frame}
%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Contribution: the \polysi{} Checker}
  \begin{center}
    \input{tikz/polysi-checker-tikz}

    \vspace{0.50cm}
    \only<2>{
      \blue{{\it Sound} \&{\it Complete:}}
        polygraph-based characterization of SI
    }
    \only<3>{
      \blue{\it Efficient:} utilizing MonoSAT solver optimized for graph problems
    }
    \only<4>{
      \blue{\it Efficient:} domain-specific pruning before encoding
    }
    \only<5>{
      \blue{\it Informative:} extract counterexamples from the unsatisifiable core
    }
  \end{center}
\end{frame}
%%%%%%%%%%%%%%%%%%%%